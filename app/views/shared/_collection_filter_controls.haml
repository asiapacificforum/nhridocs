%script#collection_template{:type => 'template/ractive'}
  .row.filter_control_box{:id => "#{collection}_controls"}
    .row
      .col-md-4
        %h4= search_heading
    .row.labels
      .col-md-2= t('.title')
      .col-md-2= t('.from')
      .col-md-2= t('.to')
      .col-md-2
        =t('.area')
        \/
        =t('.subarea')
    .row{:style => "margin-bottom:12px;"}
      .col-md-2
        %input.form-control#title{:type=>:text, :placeholder => t('.enter_text'), :value => "{{filter_criteria.title}}"}
      .col-md-2
        %input.form-control#from{:type=>"text", :name=>"from", :placeholder => t('.from_date'), :value => "{{formatted_from_date}}"}
      .col-md-2
        %input.form-control#to{:type=>"text", :name=>"to", :placeholder => t('.to_date'), :value => "{{formatted_to_date}}"}
      .col-md-3
        .btn-group.select
          %button.btn.btn-default.dropdown-toggle{:type=>:button, 'data-toggle'=>'dropdown'}
            %span.filter-option.pull-left= t('.select')
            %span.caret
          %ul.dropdown-menu
            %li.filter_rule
              %a{'on-click'=>"filter_rule('all')", :class => "{{#if filter_criteria.rule == 'all'}}selected{{/if}}"}
                %span=t('.all')
                %span.fa.fa-check
              %a{'on-click'=>"filter_rule('any')", :class => "{{#if filter_criteria.rule == 'any'}}selected{{/if}}"}
                %span=t('.any')
                %span.fa.fa-check
            {{#areas}}
            <area id='{{id}}' name='{{name}}'/>
            {{/areas}}
      .col-md-1
        %i.erase.fa.fa-refresh{'on-click'=>'clear_filter()', 'data-toggle'=>'tooltip', 'title' => t('.clear')}
      .col-md-2{:style => 'padding-left:84px'}
        {{#if expanded}}
        %a#compact{'on-click'=>'compact()', 'data-toggle'=>'tooltip', 'title'=>t('.compact_all')}
        {{else}}
        %a#expand{'on-click'=>'expand()', 'data-toggle'=>'tooltip', 'title'=>t('.expand_all')}
        {{/if}}
    .row.labels
      .col-md-2= t('.people_affected')
      .col-md-2= t('.severity')
      .col-md-2= t('.coefficient')
      {{#if item_name == 'media_appearance'}}
      .col-md-2= t('.positivity')
      {{/if}}
    .row.labels
      .col-md-1= t('.min')
      .col-md-1= t('.max')
      .col-md-1= t('.min')
      .col-md-1= t('.max')
      .col-md-1= t('.min')
      .col-md-1= t('.max')
      {{#if item_name == 'media_appearance'}}
      .col-md-1= t('.min')
      .col-md-1= t('.max')
      {{/if}}
    .row
      .col-md-1.filter_field.pa_min
        %input.form-control{:style=>"width:66px; padding-left:8px; padding-right:8px;", :value => '{{filter_criteria.pa_min}}'}
        %span.error_message= t('defaults.invalid')
      .col-md-1.filter_field.pa_max
        %input.form-control{:style=>"width:66px; padding-left:8px; padding-right:8px;", :value => '{{filter_criteria.pa_max}}'}
        %span.error_message= t('defaults.invalid')
      .col-md-1.filter_field.vs_min
        %input.form-control{:style=>"width:66px; padding-left:8px; padding-right:8px;", :value => '{{filter_criteria.vs_min}}'}
        %span.error_message= t('defaults.invalid')
      .col-md-1.filter_field.vs_max
        %input.form-control{:style=>"width:66px; padding-left:8px; padding-right:8px;", :value => '{{filter_criteria.vs_max}}'}
        %span.error_message= t('defaults.invalid')
      .col-md-1.filter_field.vc_min
        %input.form-control{:style=>"width:66px; padding-left:8px; padding-right:8px;", :value => '{{filter_criteria.vc_min}}'}
        %span.error_message= t('defaults.invalid')
      .col-md-1.filter_field.vc_max
        %input.form-control{:style=>"width:66px; padding-left:8px; padding-right:8px;", :value => '{{filter_criteria.vc_max}}'}
        %span.error_message= t('defaults.invalid')
      {{#if item_name == 'media_appearance'}}
      .col-md-1.filter_field.pr_min
        %input.form-control{:style=>"width:66px; padding-left:8px; padding-right:8px;", :value => '{{filter_criteria.pr_min}}'}
        %span.error_message= t('defaults.invalid')
      .col-md-1.filter_field.pr_max
        %input.form-control{:style=>"width:66px; padding-left:8px; padding-right:8px;", :value => '{{filter_criteria.pr_max}}'}
        %span.error_message= t('defaults.invalid')
      {{/if}}
  %div{:id => "#{collection}"}
    {{>collection}}

