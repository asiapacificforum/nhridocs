{"ast":null,"code":"/* eslint no-console:0 */\n// This file is automatically compiled by Webpack, along with any other files\n// present in this directory. You're encouraged to place your actual application logic in\n// a relevant structure within app/javascript and only use these pack files to reference\n// that code so it'll be compiled.\n//\n// To reference this file, add <%= javascript_pack_tag 'application' %> to the appropriate\n// layout file, like app/views/layouts/application.html.erb\nwindow.complaints_page_data = () => ({\n  complaints: source_complaints_data,\n  filter_criteria: source_filter_criteria,\n  next_case_reference: source_next_case_reference\n});\n\nimport complaints_options from '../complaints_page.ractive.pug';\n\nvar filter_criteria_datepicker = require(\"exports-loader?filter_criteria_datepicker!filter_criteria_datepicker\");\n\n_.extend(Ractive.defaults.data, {\n  fade: window.env != 'test',\n  all_users: source_all_users,\n  all_mandates: source_all_mandates,\n  complaint_bases: source_complaint_bases,\n  all_agencies: source_all_agencies,\n  all_agencies_in_sixes: _.chain(source_all_agencies).groupBy(function (el, i) {\n    return Math.floor(i / 6);\n  }).toArray().value(),\n  all_good_governance_complaint_bases: source_all_good_governance_complaint_bases,\n  all_human_rights_complaint_bases: source_all_human_rights_complaint_bases,\n  all_special_investigations_unit_complaint_bases: source_all_special_investigations_unit_complaint_bases,\n  all_staff: source_all_staff,\n  permitted_filetypes: source_permitted_filetypes,\n  maximum_filesize: source_maximum_filesize,\n  communication_permitted_filetypes: source_communication_permitted_filetypes,\n  communication_maximum_filesize: source_communication_maximum_filesize,\n  statuses: source_statuses,\n  local: function (gmt_date) {\n    return $.datepicker.formatDate(\"M d, yy\", new Date(gmt_date));\n  }\n});\n\nwindow.start_page = () => window.complaints = new Ractive(complaints_options);\n\n$(function () {\n  start_page();\n  filter_criteria_datepicker.start(complaints); // so that a state object is present when returnng to the initial state with the back button\n  // this is so we can discriminate returning to the page from page load\n\n  return history.replaceState({\n    bish: \"bosh\"\n  }, \"bash\", window.location);\n});\n\nwindow.onpopstate = function (event) {\n  if (event.state) {\n    // to ensure that it doesn't trigger on page load, it's a problem with phantomjs but not with chrome\n    return window.complaints.findComponent('filterControls').set_filter_from_query_string();\n  }\n};","map":{"version":3,"sources":["/Users/lesnightingill/Code/apf/vendor/gems/complaints/app/javascript/packs/complaints.js"],"names":["window","complaints_page_data","complaints","source_complaints_data","filter_criteria","source_filter_criteria","next_case_reference","source_next_case_reference","complaints_options","filter_criteria_datepicker","require","_","extend","Ractive","defaults","data","fade","env","all_users","source_all_users","all_mandates","source_all_mandates","complaint_bases","source_complaint_bases","all_agencies","source_all_agencies","all_agencies_in_sixes","chain","groupBy","el","i","Math","floor","toArray","value","all_good_governance_complaint_bases","source_all_good_governance_complaint_bases","all_human_rights_complaint_bases","source_all_human_rights_complaint_bases","all_special_investigations_unit_complaint_bases","source_all_special_investigations_unit_complaint_bases","all_staff","source_all_staff","permitted_filetypes","source_permitted_filetypes","maximum_filesize","source_maximum_filesize","communication_permitted_filetypes","source_communication_permitted_filetypes","communication_maximum_filesize","source_communication_maximum_filesize","statuses","source_statuses","local","gmt_date","$","datepicker","formatDate","Date","start_page","start","history","replaceState","bish","location","onpopstate","event","state","findComponent","set_filter_from_query_string"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAA,MAAM,CAACC,oBAAP,GAA8B,OAC3B;AACCC,EAAAA,UAAU,EAAGC,sBADd;AAECC,EAAAA,eAAe,EAAGC,sBAFnB;AAGCC,EAAAA,mBAAmB,EAAGC;AAHvB,CAD2B,CAA9B;;AAQA,OAAOC,kBAAP,MAA+B,gCAA/B;;AACA,IAAIC,0BAA0B,GAAGC,OAAO,CAAC,sEAAD,CAAxC;;AAEAC,CAAC,CAACC,MAAF,CAASC,OAAO,CAACC,QAAR,CAAiBC,IAA1B,EAAgC;AAC9BC,EAAAA,IAAI,EAAEhB,MAAM,CAACiB,GAAP,IAAY,MADY;AAE9BC,EAAAA,SAAS,EAAGC,gBAFkB;AAG9BC,EAAAA,YAAY,EAAGC,mBAHe;AAI9BC,EAAAA,eAAe,EAAGC,sBAJY;AAK9BC,EAAAA,YAAY,EAAGC,mBALe;AAM9BC,EAAAA,qBAAqB,EAAGf,CAAC,CAACgB,KAAF,CAAQF,mBAAR,EAA6BG,OAA7B,CAAqC,UAASC,EAAT,EAAYC,CAAZ,EAAc;AAAC,WAAOC,IAAI,CAACC,KAAL,CAAWF,CAAC,GAAC,CAAb,CAAP;AAAuB,GAA3E,EAA6EG,OAA7E,GAAuFC,KAAvF,EANM;AAO9BC,EAAAA,mCAAmC,EAAGC,0CAPR;AAQ9BC,EAAAA,gCAAgC,EAAGC,uCARL;AAS9BC,EAAAA,+CAA+C,EAAGC,sDATpB;AAU9BC,EAAAA,SAAS,EAAGC,gBAVkB;AAW9BC,EAAAA,mBAAmB,EAAGC,0BAXQ;AAY9BC,EAAAA,gBAAgB,EAAGC,uBAZW;AAa9BC,EAAAA,iCAAiC,EAAGC,wCAbN;AAc9BC,EAAAA,8BAA8B,EAAGC,qCAdH;AAe9BC,EAAAA,QAAQ,EAAGC,eAfmB;AAgB9BC,EAAAA,KAAK,EAAG,UAASC,QAAT,EAAkB;AAAE,WAAOC,CAAC,CAACC,UAAF,CAAaC,UAAb,CAAwB,SAAxB,EAAmC,IAAIC,IAAJ,CAASJ,QAAT,CAAnC,CAAP;AAAgE;AAhB9D,CAAhC;;AAmBAtD,MAAM,CAAC2D,UAAP,GAAoB,MAAM3D,MAAM,CAACE,UAAP,GAAoB,IAAIW,OAAJ,CAAYL,kBAAZ,CAA9C;;AAEA+C,CAAC,CAAC,YAAW;AACXI,EAAAA,UAAU;AACVlD,EAAAA,0BAA0B,CAACmD,KAA3B,CAAiC1D,UAAjC,EAFW,CAGX;AACA;;AACA,SAAO2D,OAAO,CAACC,YAAR,CAAqB;AAACC,IAAAA,IAAI,EAAC;AAAN,GAArB,EAAmC,MAAnC,EAA0C/D,MAAM,CAACgE,QAAjD,CAAP;AACD,CANA,CAAD;;AAQAhE,MAAM,CAACiE,UAAP,GAAoB,UAASC,KAAT,EAAe;AACjC,MAAIA,KAAK,CAACC,KAAV,EAAiB;AAAE;AACjB,WAAOnE,MAAM,CAACE,UAAP,CAAkBkE,aAAlB,CAAgC,gBAAhC,EAAkDC,4BAAlD,EAAP;AACD;AACF,CAJD","sourcesContent":["/* eslint no-console:0 */\n// This file is automatically compiled by Webpack, along with any other files\n// present in this directory. You're encouraged to place your actual application logic in\n// a relevant structure within app/javascript and only use these pack files to reference\n// that code so it'll be compiled.\n//\n// To reference this file, add <%= javascript_pack_tag 'application' %> to the appropriate\n// layout file, like app/views/layouts/application.html.erb\n\nwindow.complaints_page_data = () =>\n  ({\n    complaints : source_complaints_data,\n    filter_criteria : source_filter_criteria,\n    next_case_reference : source_next_case_reference\n  })\n;\n\nimport complaints_options from '../complaints_page.ractive.pug'\nvar filter_criteria_datepicker = require(\"exports-loader?filter_criteria_datepicker!filter_criteria_datepicker\")\n\n_.extend(Ractive.defaults.data, {\n  fade: window.env!='test',\n  all_users : source_all_users,\n  all_mandates : source_all_mandates,\n  complaint_bases : source_complaint_bases,\n  all_agencies : source_all_agencies,\n  all_agencies_in_sixes : _.chain(source_all_agencies).groupBy(function(el,i){return Math.floor(i/6)}).toArray().value(),\n  all_good_governance_complaint_bases : source_all_good_governance_complaint_bases,\n  all_human_rights_complaint_bases : source_all_human_rights_complaint_bases,\n  all_special_investigations_unit_complaint_bases : source_all_special_investigations_unit_complaint_bases,\n  all_staff : source_all_staff,\n  permitted_filetypes : source_permitted_filetypes,\n  maximum_filesize : source_maximum_filesize,\n  communication_permitted_filetypes : source_communication_permitted_filetypes,\n  communication_maximum_filesize : source_communication_maximum_filesize,\n  statuses : source_statuses,\n  local : function(gmt_date){ return $.datepicker.formatDate(\"M d, yy\", new Date(gmt_date)); }\n})\n\nwindow.start_page = () => window.complaints = new Ractive(complaints_options);\n\n$(function() {\n  start_page();\n  filter_criteria_datepicker.start(complaints);\n  // so that a state object is present when returnng to the initial state with the back button\n  // this is so we can discriminate returning to the page from page load\n  return history.replaceState({bish:\"bosh\"},\"bash\",window.location);\n});\n\nwindow.onpopstate = function(event){\n  if (event.state) { // to ensure that it doesn't trigger on page load, it's a problem with phantomjs but not with chrome\n    return window.complaints.findComponent('filterControls').set_filter_from_query_string();\n  }\n};\n"]},"metadata":{},"sourceType":"module"}