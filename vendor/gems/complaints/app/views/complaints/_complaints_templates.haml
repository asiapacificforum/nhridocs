%script#complaints_template{:type => 'template/ractive'}
  <filterControls filter_criteria='{{filter_criteria}}' all_good_governance_complaint_bases='{{all_good_governance_complaint_bases}}' all_human_rights_complaint_bases='{{all_human_rights_complaint_bases}}' all_special_investigations_unit_complaint_bases='{{all_special_investigations_unit_complaint_bases}}' statuses='{{statuses}}' />
  {{#complaints}}
  <complaint expanded=false all_agencies='{{all_agencies}}' all_agencies_in_threes='{{all_agencies_in_threes}}' all_categories='{{all_categories}}' all_mandates='{{all_mandates}}' all_users='{{all_users}}' assigns='{{assigns}}' case_reference='{{case_reference}}' communications='{{communications}}' complaint_category_ids='{{complaint_category_ids}}' complainant='{{complainant}}' complaint_bases='{{complaint_bases}}' complaint_categories='{{complaint_categories}}' complaint_named_documents_titles='{{complaint_named_documents_titles}}' attached_documents='{{attached_documents}}' complainant_error='{{complainant_error}}' current_assignee_id='{{current_assignee_id}}' current_assignee_name='{{current_assignee_name}}' current_status_humanized='{{current_status_humanized}}' date='{{date}}' filter_criteria='{{filter_criteria}}' good_governance_complaint_basis_ids='{{good_governance_complaint_basis_ids}}' human_rights_complaint_basis_ids='{{human_rights_complaint_basis_ids}}' id='{{id}}' imported='{{imported}}' mandate_id='{{mandate_id}}' mandate_name='{{mandate_name}}' new_assignee_id='{{new_assignee_id}}' notes='{{notes}}' opened_by_id='{{opened_by_id}}' phone='{{phone}}' reminders='{{reminders}}' special_investigations_unit_complaint_basis_ids='{{special_investigations_unit_complaint_basis_ids}}' status_changes='{{status_changes}}' village='{{village}}' age='{{age}}' email='{{email}}' desired_outcome='{{desired_outcome}}' complained_to_subject_agency='{{complained_to_subject_agency}}' gender='{{gender}}' />
  {{/complaints}}

%script#good_governance_complaint_basis_filter_select_template{:type => "template/ractive"}
  %li{:class => 'good_governance_complaint_basis_filter {{#if selected}}selected{{/if}}'}
    %a.opt{'on-click'=>'toggle(id)'}
      %span {{name}}
      %span.fa.fa-check

%script#human_rights_complaint_basis_filter_select_template{:type => "template/ractive"}
  %li{:class => 'human_rights_complaint_basis_filter {{#if selected}}selected{{/if}}'}
    %a.opt{'on-click'=>'toggle(id)'}
      %span {{name}}
      %span.fa.fa-check

%script#special_investigations_unit_complaint_basis_filter_select_template{:type => "template/ractive"}
  %li{:class => 'special_investigations_unit_complaint_basis_filter {{#if selected}}selected{{/if}}'}
    %a.opt{'on-click'=>'toggle(id)'}
      %span {{name}}
      %span.fa.fa-check

%script#agency_filter_select_template{:type => 'template/ractive'}
  %li{:class => 'agency_filter {{#if selected}}selected{{/if}}'}
    %a.opt{'on-click'=>'toggle(id)'}
      %span {{name}}
      %span.fa.fa-check

%script#assignee_filter_select_template{:type => 'template/ractive'}
  %li{:class => 'assignee_filter {{#if selected}}selected{{/if}}'}
    %a.opt{'on-click'=>'toggle(id)'}
      %span {{name}}
      %span.fa.fa-check

%script#status_selector_template{:type => 'template/ractive'}
  %li{:class =>'status_filter {{#if selected}}selected{{/if}}'}
    %a.opt{'on-click'=>'toggle()'}
      %span {{name}}
      %span.fa.fa-check

%script#filter_controls_template{:type => 'template/ractive'}
  .row.filter_control_box#complaints_controls
    .row
      .col-md-12
        %h4= t('.search')
    .row.labels
      .col-md-2= t('.complainant')
      .col-md-2= t('.village')
      .col-md-2= t('.phone')
      .col-md-2= t('.case_reference')
    .row{:style => "margin-bottom:12px;"}
      .col-md-2= text_field_tag :complainant, "{{filter_criteria.complainant}}", :placeholder => t('.enter_complainant'), :class => 'form-control'
      .col-md-2= text_field_tag :village, "{{filter_criteria.village}}", :placeholder => t('.enter_village'), :class => 'form-control'
      .col-md-2= text_field_tag :phone, "{{filter_criteria.phone}}", :placeholder => t('.phone'), :class => 'form-control'
      .col-md-2= text_field_tag :case_reference, "{{filter_criteria.case_reference}}", :placeholder => t('.case_reference'), :class => 'form-control'
      .col-md-1{:style => 'text-align:center'}
        %i.erase.fa.fa-refresh{'on-click'=>'clear_filter()', 'data-toggle'=>'tooltip', 'title' => t('.clear')}
      .col-md-1
        {{#if expanded}}
        %a#compact{'on-click'=>'compact()', 'data-toggle'=>'tooltip', 'title'=>t('.compact_all') }
        {{else}}
        %a#expand{'on-click'=>'expand()', 'data-toggle'=>'tooltip', 'title'=>t('.expand_all')}
        {{/if}}
    .row.labels
      .col-md-2= t('.status')
      .col-md-2= t('.date_from')
      .col-md-2= t('.date_to')
      .col-md-2= t('.basis')
    .row{:style => "margin-bottom:12px;"}
      .col-md-2
        .btn-group.select
          %button.btn.btn-default.dropdown-toggle{:type=>:button, 'data-toggle'=>'dropdown'}
            %span.filter-option.pull-left= t('.select_status')
            %span.caret
          %ul.dropdown-menu
            {{#statuses}}
            <statusSelector filter_criteria='{{filter_criteria}}' id='{{id}}' name='{{name}}' />
            {{/statuses}}
      .col-md-2
        %input.form-control#from{:type=>"text", :name=>"from", :placeholder => t('.date_from'), :value => "{{filter_criteria.from}}", :style => 'position:relative; z-index:12;'}
      .col-md-2
        %input.form-control#to{:type=>"text", :name=>"to", :placeholder => t('.date_to'), :value => "{{filter_criteria.to}}", :style => 'position:relative; z-index:12;'}
      .col-md-2
        .btn-group.select
          %button.btn.btn-default.dropdown-toggle{:type=>:button, 'data-toggle'=>'dropdown'}
            %span.filter-option.pull-left= t('.select_basis')
            %span.caret
          %ul.dropdown-menu
            %li.filter_rule
              %a{'on-click'=>"filter_rule('basis','all')", :class => "{{#if filter_criteria.basis_rule == 'all'}}selected{{/if}}"}
                %span= t('.all')
                %span.fa.fa-check
              %a{'on-click'=>"filter_rule('basis','any')", :class => "{{#if filter_criteria.basis_rule == 'any'}}selected{{/if}}"}
                %span= t('.any')
                %span.fa.fa-check
            %li.dropdown-header= t('.good_governance')
            {{#all_good_governance_complaint_bases}}
            <goodGovernanceComplaintBasisFilterSelect filter_criteria='{{filter_criteria}}' id='{{id}}' name='{{name}}'/>
            {{/all_good_governance_complaint_bases}}
            %li.dropdown-header= t('.human_rights')
            {{#all_human_rights_complaint_bases}}
            <humanRightsComplaintBasisFilterSelect filter_criteria='{{filter_criteria}}' id='{{id}}' name='{{name}}'/>
            {{/all_human_rights_complaint_bases}}
            %li.dropdown-header= t('.special_investigations_unit')
            {{#all_special_investigations_unit_complaint_bases}}
            <specialInvestigationsUnitComplaintBasisFilterSelect filter_criteria='{{filter_criteria}}' id='{{id}}' name='{{name}}'/>
            {{/all_special_investigations_unit_complaint_bases}}
    .row.labels
      .col-md-2= t('.agency')
      .col-md-2= t('.assignee')
    .row{:style => "margin-bottom:12px;"}
      .col-md-2
        .btn-group.select
          %button.btn.btn-default.dropdown-toggle{:type=>:button, 'data-toggle'=>'dropdown'}
            %span.filter-option.pull-left= t('.select_agency')
            %span.caret
          %ul.dropdown-menu
            %li.filter_rule
              %a{'on-click'=>"filter_rule('agency','all')", :class => "{{#if filter_criteria.agency_rule == 'all'}}selected{{/if}}"}
                %span= t('.all')
                %span.fa.fa-check
              %a{'on-click'=>"filter_rule('agency','any')", :class => "{{#if filter_criteria.agency_rule == 'any'}}selected{{/if}}"}
                %span= t('.any')
                %span.fa.fa-check
            {{#all_agencies}}
            <agencyFilterSelect filter_criteria='{{filter_criteria}}' id='{{id}}' name='{{name}}' />
            {{/all_agencies}}
      .col-md-2
        .btn-group.select
          %button.btn.btn-default.dropdown-toggle{:type=>:button, 'data-toggle'=>'dropdown'}
            %span.filter-option.pull-left= t('.select_assignee')
            %span.caret
          %ul.dropdown-menu
            {{#all_staff}}
            <assigneeFilterSelect filter_criteria='{{filter_criteria}}' id='{{id}}' name='{{first_last_name}}'/>
            {{/all_staff}}

%script#agencies_selector_template{:type => 'template/ractive'}
  .row
    .col-md-12#agencies{:style => "padding-top:0;"}
      {{#all_agencies_in_threes}}
      .row.agency
        .col-md-3
          %label{:for => 'agency_{{0.id}}'}
            %span{'data-toggle'=>"tooltip", 'data-placement'=>"bottom", :title=>'{{0.full_name}}'} {{0.name}}
        .col-md-1
          %input{:id=>'agency_{{0.id}}', :type => :checkbox, :name => '{{agency_ids}}', :value => '{{0.id}}'}

        .col-md-3
          %label{:for => 'agency_{{1.id}}'}
            %span{'data-toggle'=>"tooltip", 'data-placement'=>"bottom", :title=>'{{1.full_name}}'} {{1.name}}
        .col-md-1
          %input{:id=>'agency_{{1.id}}', :type => :checkbox, :name => '{{agency_ids}}', :value => '{{1.id}}'}

        .col-md-3
          %label{:for => 'agency_{{2.id}}'}
            %span{'data-toggle'=>"tooltip", 'data-placement'=>"bottom", :title=>'{{2.full_name}}'} {{2.name}}
        .col-md-1
          %input{:id=>'agency_{{2.id}}', :type => :checkbox, :name => '{{agency_ids}}', :value => '{{2.id}}'}
      {{/all_agencies_in_threes}}

%script#complaint_categories_template{:type => 'template/ractive'}
  #complaint_categories
    {{#complaint_categories}}
    <complaintCategory name='{{name}}' />
    {{/complaint_categories}}

%script#complaint_category_template{:type => 'template/ractive'}
  .complaint_category
    .name {{name}}

%script#complaint_template{:type => 'template/ractive'}
  {{#if persisted }}
  {{> show_complaint_template}}
  {{else}}
  {{> new_complaint_template}}
  {{/if}}

%script#mandates_selector_template{:type => 'template/ractive'}
  %form
    .col-md-3{:style => "padding-top:0;"}
      %span Good Governance
    .col-md-1.mandate{:style => "padding-top:0;"}
      %input#good_governance{:type => :radio, :name => '{{mandate_name}}', :value => 'Good Governance', 'on-change'=>'remove_error()'}
    .col-md-3{:style => "padding-top:0;"}
      %span Human Rights
    .col-md-1.mandate{:style => "padding-top:0;"}
      %input#human_rights{:type => :radio, :name => '{{mandate_name}}', :value => 'Human Rights', 'on-change'=>'remove_error()'}
    .col-md-3{:style => "padding-top:0;"}
      %span Special Investigations Unit
    .col-md-1.mandate{:style => "padding-top:0;"}
      %input#special_investigations_unit{:type => :radio, :name => '{{mandate_name}}', :value => 'Special Investigations Unit', 'on-change'=>'remove_error()'}

%script#complaint_bases_selector_template{:type => 'template/ractive'}
  {{#complaint_bases.0}}
  .col-md-4{:class => '{{key}}_complaint_basis', :id => '{{key}}_bases', :style => "padding-top:0;"}
    %label {{name}}:
    {{#complaint_bases}}
    .row.complaint_basis
      .col-md-9
        %span {{name}}
      .col-md-3
        %input{:id=>"{{key}}_complaint_basis_{{id}}", :type => :checkbox, :name => "{{good_governance_complaint_basis_ids}}", :value => '{{id}}', 'on-change'=>"remove_error()"}
    {{/complaint_bases}}
  {{/complaint_bases.0}}
  {{#complaint_bases.1}}
  .col-md-4{:class => '{{key}}_complaint_basis', :id => '{{key}}_bases', :style => "padding-top:0;"}
    %label {{name}}:
    {{#complaint_bases}}
    .row.complaint_basis
      .col-md-9
        %span {{name}}
      .col-md-3
        %input{:id=>"{{key}}_complaint_basis_{{id}}", :type => :checkbox, :name => "{{human_rights_complaint_basis_ids}}", :value => '{{id}}', 'on-change'=>"remove_error()"}
    {{/complaint_bases}}
  {{/complaint_bases.1}}
  {{#complaint_bases.2}}
  .col-md-4{:class => '{{key}}_complaint_basis', :id => '{{key}}_bases', :style => "padding-top:0;"}
    %label {{name}}:
    {{#complaint_bases}}
    .row.complaint_basis
      .col-md-9
        %span {{name}}
      .col-md-3
        %input{:id=>"{{key}}_complaint_basis_{{id}}", :type => :checkbox, :name => "{{special_investigations_unit_complaint_basis_ids}}", :value => '{{id}}', 'on-change'=>"remove_error()"}
    {{/complaint_bases}}
  {{/complaint_bases.2}}

%script#new_complaint_template{:type => 'template/ractive'}
  .row.well.well-sm.expandable_well.new_complaint.editable_container{:intro => 'slide'}
    .col-md-12
      .row
        .col-md-2
          %span=t('.case_reference')
        .col-md-5
          %span#case_reference {{case_reference}}
      .row.form-group{:class => "{{#complainant_error}}has-error{{/}}"}
        .col-md-2
          %span=t('.complainant')
        .col-md-6
          %input.form-control#complainant{:value => '{{complainant}}', 'on-keydown'=>"remove_attribute_error('complainant')"}
          %span.help-block.error#complainant_error= t('.complainant_error_message')
        .col-sm-3
          %i.fa.fa-remove.fa-lg#cancel_complaint{ :style=>"padding-left:30px", "on-click"=>"cancel_add_complaint()", "data-toggle"=>"tooltip", "data-placement"=>"bottom", :title=>"cancel"}
          %i.fa.fa-check.fa-lg#save_complaint{ :style=>"padding-left:60px", "on-click"=>"save_complaint()", "data-toggle"=>"tooltip", "data-placement"=>"bottom", :title=>"save"}
      .row.form-group{:class => "{{#age_error}}has-error{{/}}"}
        .col-md-2
          %span=t('.age')
        .col-md-2
          %input.form-control#age{:value => '{{age}}', 'on-keydown'=>"remove_attribute_error('age')", :style=>"width:50px;"}
          %span.help-block.error#age_error= t('.age_error_message')
        .col-md-1
          %span=t('.gender')
        .col-md-2
          %form
            %span M
            %input#m{:type=>:radio, :name=>'{{gender}}', :value=>'M'}
            %span F
            %input#f{:type=>:radio, :name=>'{{gender}}', :value=>'F'}
      .row.form-group{:class => "{{#village_error}}has-error{{/}}"}
        .col-md-2
          %span=t('.village')
        .col-md-6
          %input.form-control#village{:value => '{{village}}', 'on-keydown'=>"remove_attribute_error('village')"}
          %span.help-block.error#village_error= t('.village_error_message')
      .row.form-group
        .col-md-2
          %span= t('.email')
        .col-md-6
          %input.form-control#email{:value => '{{email}}'}
      .row.form-group
        .col-md-2
          %span=t('.phone')
        .col-md-6
          %input.form-control#phone{:value => '{{phone}}'}
      .row.form-group
        .col-md-2
          %span= t('.desired_outcome')
        .col-md-6
          %input.form-control#desired_outcome{:value => '{{desired_outcome}}'}
      .row.form-group
        .col-md-2
          %span= t('.complained_to_subject_agency')
        .col-md-2
          %form
            %label
              =t('yes')
              %input#complained_to_subject_agency_yes{:type => :radio, :name => "{{complained_to_subject_agency}}", :value => 'true'}
            %label
              =t('no')
              %input#complained_to_subject_agency_no{:type => :radio, :name => "{{complained_to_subject_agency}}", :value => 'false'}
      .row.form-group{:class => "{{#new_assignee_id_error}}has-error{{/}}"}
        .col-md-2
          %label=t('.assignee')
        .col-md-6
          <assigneeSelector users='{{all_staff}}' />
          %span.help-block.error#new_assignee_id_error= t('.assignee_error_message')
      .row.form-group{:class => "{{#mandate_name_error}}has-error{{/}}"}
        .col-md-2
          %label=t('.mandate')
        .col-md-10
          .row
            <mandatesSelector mandates='{{all_mandates}}' />
          %span.help-block.error#mandate_name_error= t('.mandate_name_error_message')
      .row.form-group{:class => "{{#complaint_basis_id_count_error}}has-error{{/}}"}
        .col-md-2
          %label=t('.complaint_basis')
        .col-md-10
          .row
            <complaintBasesSelector all_mandates='{{all_mandates}}' />
          %span.help-block.error#complaint_basis_id_count_error= t('.complaint_basis_error_message')
      .row
        .col-md-2
          %label=t('.agency')
        .col-md-10
          <agenciesSelector agencies='{{agencies}}' />
      .row
        .col-md-2
          %label=t('.categories')
        .col-md-10
          .row#categories
            <complaintCategoriesSelector all_categories='{{all_categories}}' />
      .panel.panel-default#documents
        .panel-heading= t('.complaint_documents')
        .panel-body
          {{> file_selector_template {key : 'complaint'} }}
          <attachedDocuments maximum_filesize='{{maximum_filesize}}' permitted_filetypes='{{permitted_filetypes}}' attached_documents='{{attached_documents}}' key='complaint' named_document_datalist='{{complaint_named_documents_titles}}' />

%script#complaint_categories_selector{:type => 'template/ractive'}
  {{#all_categories}}
  .col-md-3{:style => "padding-top:0;"}
    %label{:for => "category{{id}}"} {{name}}
  .col-md-1.category{:style => "padding-top:0;"}
    %input{:id => "category{{id}}", :type => :checkbox, :name => '{{complaint_category_ids}}', :value => '{{id}}'}
  {{/all_categories}}

%script#mandates_template{:type => 'template/ractive'}
  {{#mandate_ids}}
  <mandate id='{{.}}' />
  {{/mandate_ids}}

%script#mandate_template{:type => 'template/ractive'}
  .mandate {{name}}

%script#agencies_template{:type => 'template/ractive'}
  {{#agency_ids}}
  <agency id='{{.}}' />
  {{/agency_ids}}

%script#agency_template{:type => 'template/ractive'}
  %span.agency {{name}}

%script#show_complaint_template{:type => 'template/ractive'}
  .row.well.well-sm.expandable_well.complaint.editable_container{ :style => "{{#if !include}}display:none{{/if}}", :decorator => 'inpage_edit:{{id}}'}
    .col-md-12
      .row.basic_info
        .col-md-2
          .row
            .col-md-12
              %label= t('.reference')
              %span.case_reference {{ case_reference }}
          .row
            .col-md-12.date_received
              {{formatted_date}}
        .col-md-7
          .row
            .col-md-3
              %label= t('.current_assignee')
            .col-md-9
              %span.current_assignee {{ current_assignee_name }}
          .row{'data-toggle'=>:edit}
            .col-md-3
              %label= t('.status')
            .col-md-9
              .fade.no_edit.in#status_changes
                {{# status_changes}}
                .status_change
                  %span.status_humanized {{status_humanized}}
                  {{#if date || user_name}}
                  (
                  {{#if user_name}}
                  =t('.by')
                  %span.user_name
                    {{user_name}}
                  {{/if}}
                  {{#if date && user_name}}
                  ,
                  {{/if}}
                  {{#if date}}
                  =t('.on')
                  %span.date
                    {{date}}
                  {{/if}}
                  )
                  {{/if}}
                {{/ status_changes}}
              .fade.edit#current_status
                %form
                  %span Active
                  %input#active{:type=>:radio, :name=>'{{current_status_humanized}}', :value=>'Active'}
                  %span Complete
                  %input#complete{:type=>:radio, :name=>'{{current_status_humanized}}', :value=>'Complete'}
                  %span No further action
                  %input#no_further_action{:type=>:radio, :name=>'{{current_status_humanized}}', :value=>'No further action'}
                  %span Presumed Resolved
                  %input#presumed_resolved{:type=>:radio, :name=>'{{current_status_humanized}}', :value=>'Presumed Resolved'}
                  %span Suspended
                  %input#suspended{:type=>:radio, :name=>'{{current_status_humanized}}', :value=>'Suspended'}
                  %span Under Evaluation
                  %input#under_evaluation{:type=>:radio, :name=>'{{current_status_humanized}}', :value=>'Under Evaluation'}
          .row.form-group{:class => "{{#complainant_error}}has-error{{/}}"}
            .col-md-3
              %label= t('.complainant')
            .col-md-9{'data-toggle'=>'edit'}
              .no_edit.in
                %span.complainant {{ complainant }}
              .edit
                %input.form-control#complainant{:value => '{{complainant}}', 'on-keydown'=>"remove_attribute_error('complainant')"}
                %span.help-block.error#complainant_error= t('.complainant_error_message')
        .col-md-3.actions
          .row{:style => "margin-left:0px;"}
            .col-md-1.col-md-offset-2{'data-toggle'=>:edit}
              .no_edit.in
                .alarm_icon.counter{'data-count'=>"{{reminders_count}}", 'on-click' => "show_reminders_panel()"}
              .edit
            .col-md-1{'data-toggle'=>:edit}
              .no_edit.in
                .note_icon.show_notes.counter{'data-count'=>'{{notes_count}}', 'on-click' => "show_notes_panel()"}
              .edit
            .col-md-1{'data-toggle'=>:edit}
              .no_edit.in
                %i.fa.fa-comments-o.fa-lg.counter{'data-count'=>'{{communications_count}}', 'on-click' => 'show_communications_panel()', :style => "position:relative;"}
              .fade.edit
                %i.fa.fa-remove{:id => "complaint_editable{{id}}_edit_cancel"}
            .col-md-1.icon{'data-toggle' => 'edit'}
              .fade.edit
                %i.fa.fa-check{:id => "complaint_editable{{id}}_edit_save"}
              .fade.no_edit.in
                %i.fa.fa-pencil-square-o{:id => "complaint_editable{{id}}_edit_start", :style=> "position:relative; top:1px;"}
            .col-md-1{'data-toggle'=>:edit}
              .no_edit.in
                %i.fa.fa-sm.fa-trash-o.delete_icon{'on-click'=>'show_confirm_delete_modal()'}
              .edit
            .col-md-1{'data-toggle'=>:collapse, :href => ".collapse{{id}}", :style => "width:45px;"}
              %div{'data-toggle'=>:edit}
                .no_edit.in
                  {{#if expanded}}
                  %i#compact{'on-click'=>'compact()', 'data-toggle'=>'tooltip', 'title'=>t('.compact'), :style => "position:relative; top:3px;"}
                  {{else}}
                  %i#expand{'on-click'=>'expand()', 'data-toggle'=>'tooltip', 'title'=>t('.expand'), :style => "position:relative; top:3px;"}
                  {{/if}}
                .edit
      .row.collapse.expanded_info
        .col-md-7.col-md-offset-2.form-group{'data-toggle'=>'edit', :class => "{{#age_error}}has-error{{/}}"}
          .row
            .col-md-3
              %label= t('.age')
            .col-md-2
              .no_edit.in
                %span.complainant_age {{ age }}
              .edit
                %input.form-control#age{:value => '{{age}}', 'on-keydown'=>"remove_attribute_error('age')", :style=>"width:50px;"}
                %span.help-block.error#age_error= t('.age_error_message')
            .col-md-1
              %label= t('.gender')
            .col-md-2
              .no_edit.in
                %span.gender {{gender}}
              .edit
                %form
                  %span M
                  %input#m{:type=>:radio, :name=>'{{gender}}', :value=>'M'}
                  %span F
                  %input#f{:type=>:radio, :name=>'{{gender}}', :value=>'F'}
      .row.collapse.expanded_info
        .col-md-7.col-md-offset-2.form-group{'data-toggle'=>'edit'}
          .row
            .col-md-3
              %label= t('.email')
            .col-md-9
              .no_edit.in
                %span.email {{ email }}
              .edit
                %input.form-control#email{:value => '{{email}}'}
      .row.collapse.expanded_info
        .col-md-7.col-md-offset-2.form-group{'data-toggle'=>'edit', :class => "{{#village_error}}has-error{{/}}"}
          .row
            .col-md-3
              %label= t('.village')
            .col-md-9
              .no_edit.in
                %span.complainant_village {{ village }}
              .edit
                %input.form-control#village{:value => '{{village}}', 'on-keydown'=>"remove_attribute_error('village')"}
                %span.help-block.error#village_error= t('.village_error_message')
      .row.collapse.expanded_info
        .col-md-7.col-md-offset-2{'data-toggle'=>:edit}
          .row
            .col-md-3
              %label= t('.phone')
            .col-md-9
              .no_edit.in
                %span.complainant_phone {{ phone }}
              .edit
                %input.form-control#phone{:value => '{{phone}}'}
      .row.collapse.expanded_info
        .col-md-7.col-md-offset-2{'data-toggle'=>:edit}
          .row
            .col-md-3
              %label= t('.desired_outcome')
            .col-md-9
              .no_edit.in
                %span.desired_outcome {{ desired_outcome }}
              .edit
                %input.form-control#desired_outcome{:value => '{{desired_outcome}}'}
      .row.collapse.expanded_info
        .col-md-7.col-md-offset-2{'data-toggle'=>:edit}
          .row
            .col-md-3
              %label= t('.complained_to_subject_agency')
            .col-md-9
              .no_edit.in
                %span.complained_to_subject_agency {{#if complained_to_subject_agency }} yes {{else}} no {{/if}}
              .edit
                %form
                  %label
                    =t('yes')
                    %input#complained_to_subject_agency_yes{:type => :radio, :name => "{{complained_to_subject_agency}}", :value => 'true'}
                  %label
                    =t('no')
                    %input#complained_to_subject_agency_no{:type => :radio, :name => "{{complained_to_subject_agency}}", :value => 'false'}
      .row.collapse
        .col-md-2=t('.assignees_history')
        .col-md-5{'data-toggle'=>:edit}
          <assignees assigns='{{assigns}}' />
          .no_edit.in
          .edit
            <assigneeSelector users='{{all_staff}}' />
      .row.collapse
        .col-md-12.form-group{'data-toggle'=>:edit, :class => "{{#mandate_name_error}}has-error{{/}}"}
          .row
            .col-md-2=t('.mandate')
            .col-md-10
              .no_edit.in#mandate {{ mandate_name }}
              .edit
                .row
                  <mandatesSelector mandate_id='{{mandate_id}}' mandate_name='{{mandate_name}}' />
                %span.help-block.error#mandate_name_error= t('.mandate_name_error_message')
      .row.collapse
        .col-md-12.form-group{'data-toggle'=>:edit, :class => "{{#complaint_basis_id_count_error}}has-error{{/}}"}
          .row
            .col-md-2=t('.basis')
            .col-md-10
              .no_edit.in
                <complaintBases />
              .edit
                .row
                  <complaintBasesSelector all_mandates='{{all_mandates}}' />
              %span.help-block.error#complaint_basis_id_count_error= t('.complaint_basis_error_message')
      .row.collapse{'data-toggle'=>:edit}
        .col-md-2=t('.agency')
        .col-md-10
          .no_edit.in.comma-list#agencies{:style => 'display:flex'}
            <agencies agency_ids='{{agency_ids}}' />
          .edit
            <agenciesSelector agencies='{{agencies}}' />
      .row.collapse{'data-toggle'=>:edit}
        .col-md-2=t('.documents')
        .col-md-10#complaint_documents
          .edit{:style => "padding-left:15px; padding-top:15px;"}
            {{> file_selector_template {key : 'complaint'} }}
          .no_edit.in
          <attachedDocuments maximum_filesize='{{maximum_filesize}}' permitted_filetypes='{{permitted_filetypes}}' key='complaint' attached_documents='{{attached_documents}}' />
      .row.collapse{'data-toggle'=>:edit}
        .col-md-2=t('.categories')
        .col-md-10
          .no_edit.in
            <complaintCategories />
          .edit
            .row#categories
              <complaintCategoriesSelector />

%script#complaint_bases_template{:type => 'template/ractive'}
  #good_governance_complaint_bases.comma-list
    {{#if good_governance_complaint_basis_ids}}
    %span.basis_name=t('.good_governance')
    {{/if}}
    {{#good_governance_complaint_basis_ids}}
    <complaintBasis mandate="good_governance" id='{{.}}' good_governance_complaint_basis_ids='{{good_governance_complaint_basis_ids}}' />
    {{/good_governance_complaint_basis_ids}}
  #human_rights_complaint_bases.comma-list
    {{#if human_rights_complaint_basis_ids}}
    %span.basis_name=t('.human_rights')
    {{/if}}
    {{#human_rights_complaint_basis_ids}}
    <complaintBasis mandate="human_rights" id='{{.}}' human_rights_complaint_basis_ids='{{human_rights_complaint_basis_ids}}' />
    {{/human_rights_complaint_basis_ids}}
  #special_investigations_unit_complaint_bases.comma-list
    {{#if special_investigations_unit_complaint_basis_ids}}
    %span.basis_name=t('.special_investigations_unit')
    {{/if}}
    {{#special_investigations_unit_complaint_basis_ids}}
    <complaintBasis mandate="special_investigations_unit" id='{{.}}' special_investigations_unit_complaint_basis_ids='{{special_investigations_unit_complaint_basis_ids}}' />
    {{/special_investigations_unit_complaint_basis_ids}}

%script#complaint_basis_template{:type => 'template/ractive'}
  %span.complaint_basis {{name}}

%script#assignee_selector_template{:type => 'template/ractive'}
  %select.form-control#assignee{:value => '{{new_assignee_id}}', 'on-change'=>"remove_error()"}
    %option{:value => nil, :selected => true, :disabled => true, :style =>"color:#333;"}
      {{#if editing}}
      =t('.reassign')
      {{else}}
      =t('.select_assignee')
      {{/if}}
    {{#all_staff}}
    %option{:value => '{{id}}'} {{ first_last_name }}
    {{/all_staff}}

%script#assignees_template{:type => 'template/ractive'}
  #assignees
    {{#assigns}}
    <assignee  name='{{name}}' date='{{date}}' />
    {{/assigns}}

%script#assignee_template{:type => 'template/ractive'}
  .row.assignee
    .col-md-6.date {{date}}
    .col-md-6.name {{name}}
