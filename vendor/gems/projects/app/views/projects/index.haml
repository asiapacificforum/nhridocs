= javascript_include_tag 'confirm_delete_modal'
= render :partial => 'shared/confirm_delete_modal'
= render :partial => 'projects/index'
= render :partial => 'reminders/reminder' # it's in the main app
= render :partial => 'notes/note' # it's in the main app

:coffeescript
  window.projects_data = #{@projects.to_json}
  window.mandates = #{@mandates.to_json}
  window.agencies = #{@agencies.to_json}
  window.conventions = #{@conventions.to_json}
  window.planned_results = #{@planned_results.to_json }
  window.project_types = #{@project_types.to_json}
  window.project_named_documents_titles = #{@project_named_documents_titles.to_json}
  window.performance_indicators = _.chain(planned_results).
    map((pr)->pr.outcomes).
    flatten().
    map((pr)->pr.activities).
    flatten().
    map((a)->a.performance_indicators).
    flatten().
    map((a)->_(a).values()).
    object().
    value()
  window.maximum_filesize    = #{@maximum_filesize}
  window.permitted_filetypes = #{@permitted_filetypes}
  window.create_reminder_url = "#{@create_reminder_url}"
  window.create_note_url     = "#{@create_note_url}"
  window.filter_criteria =
    title : ""
    mandate_ids : []
    mandate_rule   : 'any'
    agency_ids : []
    convention_ids : []
    agency_convention_rule : 'any'
    project_type_ids : []
    project_type_rule : 'any'
    performance_indicator_id : null
  window.delete_project_confirmation_message = "#{t('.delete_project_confirmation_message')}"
  window.delete_project_document_confirmation_message = "#{t('.delete_project_document_confirmation_message')}"

=javascript_include_tag 'projects'
