= stylesheet_link_tag 'outreach_media'
= render :partial => 'index' # b/c the partial is used for the javascript test suite

:javascript
  var outreach_events = #{@outreach_events.to_json}
  var areas = #{@areas.to_json}
  var subareas = #{@subareas.to_json}
  var new_outreach_event = #{@outreach_event.to_json}
  var create_outreach_event_url = "#{@outreach_event.create_url}"
  var maximum_filesize = #{OutreachEvent.maximum_filesize * 1000000}
  var permitted_filetypes = #{OutreachEvent.permitted_filetypes }
  var audience_types = #{@audience_types.to_json}
  var impact_ratings = #{@impact_ratings.to_json}
  var default_selected_audience_type = "#{t('.select_audience_type')}"
  var default_selected_impact_rating = "#{t('.select_impact_rating')}"
  var planned_results = #{@planned_results.to_json }
  var Collection = {}

:coffeescript
  window.performance_indicators = _.chain(planned_results).
    map((pr)->pr.outcomes).
    flatten().
    map((pr)->pr.activities).
    flatten().
    map((a)->a.performance_indicators).
    flatten().
    map((a)->_(a).values()).
    object().
    value()

= javascript_include_tag "outreach"
