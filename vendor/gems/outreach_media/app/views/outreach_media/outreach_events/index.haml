= render :partial => 'index' # b/c the partial is used for the javascript test suite

:javascript
  outreach_events = #{@outreach_events.to_json}
  areas = #{@areas.to_json}
  subareas = #{@subareas.to_json}
  new_outreach_event = #{@outreach_event.to_json}
  create_outreach_event_url = "#{@outreach_event.create_url}"
  maximum_filesize = #{OutreachEvent.maximum_filesize}
  permitted_filetypes = #{OutreachEvent.permitted_filetypes }
  audience_types = #{@audience_types.to_json}
  impact_ratings = #{@impact_ratings.to_json}
  default_selected_audience_type = "#{t('.select_audience_type')}"
  default_selected_impact_rating = "#{t('.select_impact_rating')}"
  planned_results = #{@planned_results.to_json }

:coffeescript
  window.performance_indicators = _.chain(planned_results).
    map((pr)->pr.outcomes).
    flatten().
    map((pr)->pr.activities).
    flatten().
    map((a)->a.performance_indicators).
    flatten().
    map((a)->_(a).values()).
    object().
    value()

= javascript_include_tag "outreach"
