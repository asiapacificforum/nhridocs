%script#outreach_media_subarea_template{:type=> 'template/ractive'}
  %span.subarea {{ name }}

%script#outreach_media_area_template{:type=> 'template/ractive'}
  .area
    .name {{ name }}
    .subareas
      {{#subarea_ids:i}}
      <outreachmediasubarea id={{subarea_ids[i]}}>
      {{/subarea_ids}}

%script#metric_template{:type => 'template/ractive'}
  .metric{:id =>"{{key}}"}
    .name {{ name }}
    .value {{ value }}

%script#subarea_template{:type=> 'template/ractive'}
  %li{:class => 'subarea {{#if subarea_selected}}selected{{/if}}'}
    %a.opt{'on-click'=>'toggle()'}
      %span.text {{name}}
      %span.fa.fa-check

%script#area_template{:type=> 'template/ractive'}
  %li{:class => 'area dropdown-header {{#if area_selected}}selected{{/if}}'}
    %a{'on-click'=>'toggle()'}
      %span {{name}}
      %span.fa.fa-check
  {{#subareas}}
  <subarea>
  {{/subareas}}

%script#subarea_select_template{:type=> 'template/ractive'}
  .checkbox.subarea
    %label
      %input{:type=>:checkbox, 'on-change' => 'show_metrics(id)', :checked => '{{checked}}', :id => '{{model_name}}_subarea_ids_{{id}}', :name => '{{model_name}}[subarea_ids][]', :value => '{{id}}'}
      {{ name }}

%script#area_select_template{:type=> 'template/ractive'}
  .checkbox
    %label
      %input{:type=>:checkbox, :id => '{{model_name}}_area_ids_{{id}}', :name => '{{area_ids}}', :value => '{{id}}'}
      {{ name }}
  {{#subareas }}
  <subarea-select id='{{id}}'/> 
  {{/subareas }}

%script#edit_title{:type => 'text/ractive'}
  .row.form-group{:class => "{{#title_error}}has-error{{/}}"}
    .col-md-12.clearfix
      .chars_remaining{:style => "float:right"}= t('.chars_remaining') # the count variable is embedded in the i18n text
      =text_field_tag '{{model_name}}[title]', nil, :class => 'form-control', :id => '{{model_name}}_title', :placeholder => "Enter title", :size => 100, :maxlength => 100, :value => "{{title}}", 'on-keydown' => "remove_title_errors()"
      %span.help-block#title_error{:style => "font-size:0.8em; padding-left:4px; position:relative; top:-4px; width:100%; background-color:#d9d0a5"}= t('.title_error_message')

%script#performance_indicator_select{:type => 'template/ractive'}
  .panel.panel-default
    .panel-heading
      .row
        .col-md-2= t('.performance_indicators')
    .panel-content{'data-toggle' => :edit}
      %div{:class => 'fade no_edit {{#if persisted}}in{{/if}}'}
        .row
          .col-md-6.col-md-offset-1#performance_indicators{:style => "display:flex; flex-direction:column"}
            {{>performance_indicator_list}}
      %div{:class => 'fade edit {{#unless persisted}}in{{/unless}}'}
        .form-group.row#performance_indicator
          .col-md-6{:style => 'padding-left:40px;'}
            .dropdown.performance_indicator_select
              %a.btn.btn-default.dropdown-toggle{"data-toggle" => "dropdown", :href => "#"}
                =t('.select_performance_indicator')
                %span.caret
              %ul.dropdown-menu
                %li.dropdown-header= t('.planned_result')
                {{#planned_results }}
                %li.dropdown-submenu.planned_result
                  %a {{ indexed_description }}
                  %ul.dropdown-menu
                    %li.dropdown-header= t('.outcome')
                    {{#outcomes }}
                    %li.dropdown-submenu.outcome
                      %a {{ indexed_description }}
                      %ul.dropdown-menu
                        %li.dropdown-header= t('.activity')
                        {{#activities}}
                        %li.dropdown-submenu.activity
                          %a {{ indexed_description }}
                          %ul.dropdown-menu
                            %li.dropdown-header= t('.performance_indicator')
                            {{#performance_indicators}}
                            %li.performance_indicator
                              %a.opt{ 'on-click'=>'select(this)'}
                                %span.text{'data-id'=>'{{id}}'} {{ indexed_description }}
                                %span.fa.fa-check
                            {{/performance_indicators}}
                        {{/activities}}
                    {{/outcomes }}
                {{/planned_results }}
          .col-md-6#performance_indicators{:style => "display:flex; flex-direction:column"}
            {{>performance_indicator_list}}

%script#performance_indicator_list{:type => 'template/ractive'}
  {{#performance_indicator_ids}}
  %div.performance_indicator {{performance_indicators[.]}}
  {{/performance_indicator_ids}}
  {{^performance_indicator_ids}}
  %div.performance_indicator=t('.none_assigned')
  {{/performance_indicator_ids}}
