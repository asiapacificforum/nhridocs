%h1= t('.heading')
.btn.btn-success.btn-sm.add_article{:style => "margin-bottom:12px; color:white;", :onclick => "media.new_article()"}
  %i.fa.fa-plus.fa-lg{:style => "color:white"}
  %span= t('.add_article')

#media_appearances

= render :partial => 'shared/collection_filter_controls', :locals => {:collection => :media_appearances, :search_heading => t('.search_heading')}
= render :partial => 'shared/collection', :locals => {:item => :media_appearance, :i18n_key => "outreach_media.media_appearances.index"}
= render :partial => 'media_appearance_templates'
-#= render :partial => 'outreach_media/shared/common_templates'
= render :partial => 'reminders/reminder' # it's in the main app
= render :partial => 'notes/note' # it's in the main app

:javascript
  media_appearances = #{@media_appearances.to_json}
  areas = #{@areas.to_json}
  subareas = #{@subareas.to_json}
  new_media_appearance = #{@media_appearance.to_json}
  create_media_appearance_url = "#{@media_appearance.create_url}"
  maximum_filesize = #{OutreachEvent.maximum_filesize * 1000000}
  permitted_filetypes = #{OutreachEvent.permitted_filetypes }
  planned_results = #{@planned_results.to_json }

:coffeescript
  window.performance_indicators = _.chain(planned_results).
    map((pr)->pr.outcomes).
    flatten().
    map((pr)->pr.activities).
    flatten().
    map((a)->a.performance_indicators).
    flatten().
    map((a)->_(a).values()).
    object().
    value()

= javascript_include_tag "media"
