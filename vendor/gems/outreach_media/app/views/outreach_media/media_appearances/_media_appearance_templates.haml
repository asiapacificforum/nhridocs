%script#media_appearances_template{:type => 'template/ractive'}
  .row#media_appearances_controls
    .row
      .col-md-4
        %h4= t('.search_heading')
    .row
      .col-md-2
        %label{:for=>"title"}= t('.title')
      .col-md-2
        %label{:for=>"from"}= t('.from')
      .col-md-2
        %label{:for=>"to"}= t('.to')
      .col-md-2
        %label{:for=>"area"}
          =t('.area')
          \/
          =t('.subarea')
    .row
      .col-md-2= text_field_tag :title, "{{sort_criteria.title}}", :placeholder => t('.enter_text')
      .col-md-2
        %input{:type=>"text", :id=>"from", :name=>"from", :placeholder => t('.from_date')}
      .col-md-2
        %input{:type=>"text", :id=>"to", :name=>"to", :placeholder => t('.to_date')}
      .col-md-2
        .btn-group.area-select
          %button.btn.btn-default.dropdown-toggle{:type=>:button, 'data-toggle'=>'dropdown'}
            %span.filter-option.pull-left= t('.select')
            %span.caret
          %ul.dropdown-menu
            {{#areas}}
            <area id='{{id}}' name='{{name}}'/>
            {{/areas}}
      .col-md-2
      .col-md-2
        {{#if expanded}}
        %a#compact{'on-click'=>'compact()', 'data-toggle'=>'tooltip', 'title'=>'Compact all'}
        {{else}}
        %a#expand{'on-click'=>'expand()', 'data-toggle'=>'tooltip', 'title'=>'Expand all'}
        {{/if}}
    .row
      .col-md-2
        %label{:for=>"people_affected"}= t('.people_affected')
      .col-md-2
        %label{:for=>"severity"}= t('.severity')
      .col-md-2
        %label{:for=>"coefficient"}= t('.coefficient')
      .col-md-2
        %label{:for=>"positivity"}=t('.positivity')
      .row#sort_criteria
        .col-md-2#title {{sort_criteria.title}}
    .row
      .col-md-1= t('.min')
      .col-md-1= t('.max')
      .col-md-1= t('.min')
      .col-md-1= t('.max')
      .col-md-1= t('.min')
      .col-md-1= t('.max')
      .col-md-1= t('.min')
      .col-md-1= t('.max')
    .row
      .col-md-1
        %input{:style=>"width:80px"}
      .col-md-1
        %input{:style=>"width:80px"}
      .col-md-1
        %input{:style=>"width:50px"}
      .col-md-1
        %input{:style=>"width:50px"}
      .col-md-1
        %input.violation_coefficient.min{:style=>"width:50px", :value => '{{sort_criteria.vc_min}}'}
      .col-md-1
        %input.violation_coefficient.max{:style=>"width:50px", :value => '{{sort_criteria.vc_max}}'}
      .col-md-1
        %input.positivity_rating.min{:style=>"width:50px", :value => '{{sort_criteria.pr_min}}'}
      .col-md-1
        %input.positivity_rating.max{:style=>"width:50px", :value => '{{sort_criteria.pr_max}}'}
  {{#media_appearances}}
  <ma description='{{description}}'/>
  {{/media_appearances}}

%script#media_appearance_template{:type => 'template/ractive'}
  .row.media_appearance.well.well-sm{:style => "{{#if !include}}display:none{{/if}}"}
    .col-md-12
      .row.basic_info
        .col-md-2.date{:style => "width:15%"} {{ date }}
        .col-md-2.title{:style => "width:60%"} {{ title }}
        .col-md-2.actions{:style => "width:25%"}
          %div.alarm_icon{'on-click' => "show_reminders_panel()", :style => "position:relative; float:left; width:20px; top:3px; margin-left:20px;"}
          %i.fa.fa-file-text-o.show_notes{'on-click' => "show_notes_panel()", :style => "margin-left:28px; position:relative; float:left; top:3px;"}
          {{#if has_link }}
          %i.fa.fa-globe{ :style => "margin-left:28px; position:relative; float:left; top:3px;"}
          {{elseif has_scanned_doc }}
          %i.fa.fa-cloud-download{ :style => "margin-left:28px; position:relative; float:left; top:3px;"}
          {{/if}}
          %i.fa.fa-pencil-square-o{ :style => "margin-left:28px; position:relative; float:left; top:3px;"}
          %a{'data-toggle'=>:collapse, :href => ".collapse{{id}}"}
            %i.fa.fa-info-circle{ :style => "margin-left:28px; position:relative; float:left; top:3px;"}
      .panel.panel-default.collapse.expanded_info{:class => "collapse{{id}}"}
        .panel-heading
          .row
            .col-md-2.description{:style => "width:50%"}
              =t('.areas')
              \/
              =t('.subareas')
            .col-md-2.metrics{:style=>"width:25%;"}= t('.metrics')
        .panel-content
          .row
            .col-md-2.description{:style => "width:50%"}
              {{#media_areas}}
              <mediaarea>
              {{/media_areas}}
            .col-md-2.metrics{:style=>"width:25%; display:flex; flex-direction:column;"}
              {{#metrics}}
              <metric/>
              {{/metrics}}

%script#area_template{:type=> 'template/ractive'}
  %li{:class => 'area dropdown-header {{#if area_selected}}selected{{/if}}'}
    %a{'on-click'=>'toggle()'}
      %span {{name}}
      %span.glyphicon.glyphicon-ok.check-mark
  {{#subareas}}
  <subarea>
  {{/subareas}}

%script#subarea_template{:type=> 'template/ractive'}
  %li{:class => 'subarea {{#if subarea_selected}}selected{{/if}}'}
    %a.opt{'on-click'=>'toggle()'}
      %span.text {{name}}
      %span.glyphicon.glyphicon-ok.check-mark

%script#media_area_template{:type=> 'template/ractive'}
  .area
    .name {{ name }}
    .subareas
      {{#subarea_ids:i}}
      <mediasubarea id={{subarea_ids[i]}}>
      {{/subarea_ids}}

%script#media_subarea_template{:type=> 'template/ractive'}
  %span.subarea {{ name }}

%script#metric_template{:type => 'template/ractive'}
  .metric
    .name {{ name }}
    .value {{ value }}
