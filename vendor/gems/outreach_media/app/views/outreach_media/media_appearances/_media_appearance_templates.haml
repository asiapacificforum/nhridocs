%script#media_appearances_template{:type => 'template/ractive'}
  .row#media_appearances_controls
    .col-md-2= text_field_tag :title, "{{sort_criteria.title}}"
    .col-md-2
      %label{:for=>"from"} From
      %input{:type=>"text", :id=>"from", :name=>"from"}
    .col-md-2
      %label{:for=>"to"} To
      %input{:type=>"text", :id=>"to", :name=>"to"}
    .col-md-2= select_tag :area, options_from_collection_for_select(@areas, :id, :name), :multiple => true, :value => '{{sort_criteria.areas}}'
    .col-md-2
    .col-md-2
      {{#if expanded}}
      %a#compact{'on-click'=>'compact()', 'data-toggle'=>'tooltip', 'title'=>'Compact all'}
      {{else}}
      %a#expand{'on-click'=>'expand()', 'data-toggle'=>'tooltip', 'title'=>'Expand all'}
      {{/if}}
    .row#sort_criteria
      .col-md-2#title {{sort_criteria.title}}
  {{#media_appearances}}
  <ma description='{{description}}'/>
  {{/media_appearances}}

%script#media_appearance_template{:type => 'template/ractive'}
  .row.media_appearance.well.well-sm{:style => "{{#if !include}}display:none{{/if}}"}
    .col-md-12
      .row.basic_info
        .col-md-2.date{:style => "width:15%"} {{ date }}
        .col-md-2.title{:style => "width:60%"} {{ title }}
        .col-md-2.actions{:style => "width:25%"}
          %div.alarm_icon{'on-click' => "show_reminders_panel()", :style => "position:relative; float:left; width:20px; top:3px; margin-left:20px;"}
          %i.fa.fa-file-text-o.show_notes{'on-click' => "show_notes_panel()", :style => "margin-left:28px; position:relative; float:left; top:3px;"}
          {{#if has_link }}
          %i.fa.fa-globe{ :style => "margin-left:28px; position:relative; float:left; top:3px;"}
          {{elseif has_scanned_doc }}
          %i.fa.fa-cloud-download{ :style => "margin-left:28px; position:relative; float:left; top:3px;"}
          {{/if}}
          %i.fa.fa-pencil-square-o{ :style => "margin-left:28px; position:relative; float:left; top:3px;"}
          %a{'data-toggle'=>:collapse, :href => ".collapse{{id}}"}
            %i.fa.fa-info-circle{ :style => "margin-left:28px; position:relative; float:left; top:3px;"}
      .panel.panel-default.collapse.expanded_info{:class => "collapse{{id}}"}
        .panel-heading
          .row
            .col-md-2.description{:style => "width:50%"} Areas/subareas
            .col-md-2.metrics{:style=>"width:25%;"} Metrics
        .panel-content
          .row
            .col-md-2.description{:style => "width:50%"}
              <description areas='{{description.areas}}'/>
            .col-md-2.metrics{:style=>"width:25%; display:flex; flex-direction:column;"}
              {{#metrics}}
              <metric/>
              {{/metrics}}

%script#description_template{:type=> 'template/ractive'}
  {{#areas}}
  <area name='{{name}}' subareas='{{subareas}}'/>
  {{/areas}}

%script#area_template{:type=> 'template/ractive'}
  .area
    .name {{ name }}
    .subareas
      {{#subareas}}
      %span.subarea {{ . }}
      {{/subareas}}

%script#metric_template{:type => 'template/ractive'}
  .metric
    .name {{ name }}
    .value {{ value }}
