.message_block
%h1= t('.heading')

= render :partial => 'template_upload', :locals => {:id => 'primary_upload', :prefix => 'internal_document', :label_prefix => 'internal_document'}
= render :partial => 'template_upload', :locals => {:id => 'archive_upload', :prefix => 'internal_document[archive_files][]', :label_prefix => 'internal_document_archive_files_'}
= render :partial => 'internal_documents_templates'

= javascript_include_tag 'corporate_services/in_page_edit'
= javascript_include_tag 'corporate_services/flash'

#container

:coffeescript
  $ ->
    $('.fileupload-buttonbar .start').on 'click', ->
      flash.notify()

    $('.fileupload-buttonbar .fileinput-button, .fileupload-buttonbar .cancel, .fileupload-buttonbar .delete').on 'click', (event)->
      event.stopPropagation()
      flash.hide()

:coffeescript
  window.maximum_filesize = #{InternalDocument.maximum_filesize}
  window.permitted_filetypes = #{ InternalDocument.permitted_filetypes }
  window.files = #{ @internal_documents.to_json }
  window.files_list_error = "#{t('.flash.no_files_error')}"
  window.required_files_titles = #{@required_files_titles.to_json}

= javascript_include_tag "corporate_services/internal_documents"
