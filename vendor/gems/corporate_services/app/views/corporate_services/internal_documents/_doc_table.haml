%table.document.editable_container{:style => "width:800px", :decorator=>'inpage_edit:{{id}}', :id=>"internal_document_editable{{id}}"}
  %tr
    %td.title{:style => "width:36%"}
      %div{:'data-toggle' => 'edit'}
        .fade.edit
          %input.title{:'data-name' => :title, :name => "internal_document[title]", :'value' => "{{ title }}", :twoway=>'false'}
        .fade.no_edit.editable
          %span {{ title }}
    %td.revision{:'data-name' => 'revision', :style => "width:8%"}
      %div{:'data-toggle' => 'edit'}
        .fade.edit
          %input.revision{:'data-name' => :revision, :name => "internal_document[revision]", :'value' => "{{ revision }}", :style => 'width:40px', :twoway=>'false'}
        .fade.no_edit.editable
          -# height required to properly position the tag
          %span {{ revision }}
    -# make sure it's on top of the next td, even though it precedes in the html
    %td.include_popover{:style => "text-align:center; width:8%"}
      .icon{:'data-toggle' => 'edit'}
        %i.fa.fa-info-circle.fa-lg.details{'data-details' => "{{JSON.stringify(this)}}"} <!-- popover is attached as a sibling below this -->
    %td{:style => "text-align:center; width:8%"}
      .icon{:'data-toggle' => 'edit', :style => 'height:20px'}
        .fade.edit
          %i.fa.fa-remove.fa-lg{:id => "internal_document_editable{{id}}_edit_cancel",:style => "position:relative; left:30px;"}
    %td{:style => "text-align:center; width:8%"}
      %div.icon{:'data-toggle' => 'edit'}
        .fade.edit
          %i.fa.fa-check.fa-lg{:id => "internal_document_editable{{id}}_edit_save", :style => "position:relative; left:21px;"}
        .fade.no_edit
          %i.fa.fa-pencil-square-o.fa-lg{:id => "internal_document_editable{{id}}_edit_start"}
    %td{:style => "text-align:center; width:8%"}
      .icon
        %i.fa.fa-cloud-download.fa-lg.download{'on-click'=>'download_file()'}
    %td{:style => "text-align:center; width:8%"}
      -if file == "file"
        .icon{:'data-toggle' => "collapse", :'data-parent' => "#accordion", :href => "#collapse{{ id }}"}
          %i.fa.fa-folder-o.fa-lg
      -else
        -# just to keep the spacing the same
        .icon{:style => 'visibility:hidden'}
          %i.fa.fa-archive.fa-lg
    %td{:style => "text-align:center; width:8%"}
      -if file == "file"
        -# next tag is where the fileupload is attached
        .fileupload.icon{:decorator => "fileupload:'{{url}}'",
                         :id => "upload{{ id }}",
                         :'data-file-input' => "#upload{{ id }} #archive_fileinput",
                         :'data-type' => 'put',
                         :'data-param-name' => 'internal_document[archive_files][][file]',
                         :'data-upload-template-id' => '#archive_upload' }
          %i.fa.fa-plus.fa-lg{:onClick => "$(this).parent().find('input:file').click()"}
          -# wierd opacity and width ensures that firefox recognizes element as visible and capybara-webkit can interact!
          -# only required for testing, it actually works in firefox in real life!
          %input#archive_fileinput{:multiple => "multiple", :name => "replace_file", :type => "file", :style => "position:absolute; top:0px; left:400px; opacity:0.01; width:0.01px;"}
      -else
        -# just to keep the spacing the same
        #file_replace{:style => 'visibility:hidden'}
          %i.fa.fa-plus.fa-lg
    %td{:style => "text-align:center; width:8%"}
      %div.icon.delete
        %i.fa.fa-trash-o.fa-lg
