-# replaces the upload template after a file has been uploaded
%script#template-download{:type => 'html/template'}
  {% for (var i=0, file; file=o.files[i]; i++) { %}
  %tr.template-download(data-created_at = "{%= file.created_at %}" data-formatted_filesize = "{%= file.formatted_filesize %}" data-id = "{%= file.id %}" data-lastModifiedDate = "{%= file.lastModifiedDate %}" data-original_filename = "{%= file.original_filename %}" data-original_type = "{%= file. original_type %}" data-revision = "{%= file.revision %}")
    %td.title
      %div{:'data-toggle' => 'edit'}
        %div.edit
          %input.title{:'data-name' => :title, :'data-value' => "{%= file.title %}"}
        %div.no_edit
          %span {%= file.title %}
    %td.revision{:'data-name' => 'revision'}
      %div{:'data-toggle' => 'edit'}
        %div.fade.edit
          %input.revision{:'data-name' => :revision, :'data-value' => "{%= file.revision %}"}
        %div.fade.no_edit
          %div{:style => "width:30px;"} {%= file.revision %}
    <!-- make sure it's on top of the next td, even though it precedes in the html -->
    %td{:style => 'z-index:16; position:relative;'}
      %div{:'data-toggle' => 'edit'}
        %div.edit
          %i.glyphicon.glyphicon-remove
        %div.no_edit
          %i.glyphicon.glyphicon-info-sign.details <!-- popover is attached as a sibling below this -->
    %td{:style => 'z-index:15; position:relative;'}
      %div{:'data-toggle' => 'edit'}
        %div.edit
          %i.glyphicon.glyphicon-ok
        %div.no_edit
          %i.glyphicon.glyphicon-edit
    %td{:style => 'z-index:15; position:relative;'}
      %i.glyphicon.glyphicon-cloud-download
    %td
      %button.btn.btn-danger.delete{:data=> {:url => "{%= file.deleteUrl %}"}}
        %i.glyphicon.glyphicon-trash
        %span= t('defaults.delete')
      %input.toggle{:type => "checkbox", :name => "delete", :value => "1"}
  {% } %}
